<%= javascript_include_tag "https://www.gstatic.com/charts/loader.js" %>

<div class="container-fluid">

  <nav class="navbar navbar-default navbar-show">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">TrackMetrics</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="<%= registered_applications_path %>">MyApps <span class="sr-only">(current)</span></a></li>
        <li><a href="<%= edit_registered_application_path %>">Edit This App</a></li>
      </ul>
    </div>
  </nav>


  <div>
    <%= pie_chart @app.events.group(:name).count %>
  </div>
  <div>
    <%= line_chart @app.events.group_by_day(:created_at).count %>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">URL</th>
        <th scope="col">Event Names</th>
        <th scope="col">Event Count</th>
      </tr>
    </thead>

    <tr>
      <td> <%= @app.name %> </td>
      <td> <%= @app.url %> </td>
      <td>
          <% @events.each do |key, value| %>
            <%= key + "." %>
          <% end %>
      </td>
      <td>
        <%= @event_count %>
      </td>
    </tr>
</div>
